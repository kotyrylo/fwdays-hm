<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  
  <style>
* {
  padding: 0;
  margin: 0;
}

.screen {
  position: relative;
  width: 100vw;
  height: 100vh;
  background-color: pink;
  padding: 20px;
}

.stickyNote {
  width: 200px;
  height: 150px;
  background-color: yellow;
  padding-top: 18px;
  box-sizing: border-box; 
  box-shadow: 0px 5px 7px 3px rgba(0, 0, 0, .5), inset 0px -6px 0px 6px yellow, inset 0px 15px 0px 5px gold;
  transition: box-shadow .3s, background-color .3s;
  position: absolute;
  border-radius: 0 0 30px 0;
}

.stickyNote:hover {
  cursor: pointer;
}

.picked {
  box-shadow: 5px 10px 20px 5px rgba(0, 0, 0, .5), inset 0px -6px 0px 6px yellow, inset 0px 15px 0px 5px gold;  
  z-index: 1000;
}

.label {
  width: 100%;
  height: 100%;
}

.input {
  position: absolute;
  width: 0;
  height: 0;
  opacity: 0;
}

.display {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  text-align: justify;
  align-items: center;
  word-break: break-all;
  font-size: 2em;
  padding: 10px;
  overflow-x: scroll;
}

.plusButton {
  position: fixed;
  top: 10px;
  right: 10px;
  font-size: 50px;
  cursor: pointer;
}
</style>
<div class='screen'>
  <div class="stickyNote">
    <label class='label'>
        <input class="input" type="text" />
        <p class='display'></p>
    </label>
  </div>
  <div class="stickyNote">
    <label class='label'>
        <input class="input" type="text" />
        <p class='display'></p>
    </label>
  </div>
  <div class="stickyNote">
    <label class='label'>
        <input class="input" type="text" />
        <p class='display'></p>
    </label>
  </div>
  <div class="plusButton">+</div>
</div>
<script>
const plusButton = document.querySelector('.plusButton');
const screen  = document.querySelector('.screen');

const stickyNoteTemplate = {
  tag: 'div',
  className: 'stickyNote',
  childs: [
    {
      tag: 'label',
      className: 'label',
      childs: [
        {
          tag: 'input',
          className: 'input',
        },
        {
          tag: 'p',
          className: 'display',
        }
      ]
    }
  ]
}

const tagGenerator = (tag, className = '', innerHTML = '', childs) => {
    const el = document.createElement(tag);
    el.className = className;
    el.innerHTML = innerHTML;
    
    for (key in childs) {
      childsAppender(el, childs[key]);
    }

    return el;
}

const childsAppender = (parrent, child) => {
   const {tag, className, innerHTML, childs } = child;

   const childTag = tagGenerator(tag, className, innerHTML, childs)
   parrent.appendChild(childTag)
}

const noteGenerator = (noteData = stickyNoteTemplate) => {
  const {tag, className, innerHTML, childs } = noteData

  const newNote = tagGenerator(tag, className, innerHTML, childs)
  screen.appendChild(newNote)
  noteListRefiiller()
}

const noteListRefiiller = () => {
  const elementsList = document.getElementsByClassName('stickyNote');

  for (key in elementsList) {
    stikyNote(elementsList[key])
  }
}

plusButton.addEventListener('click', () => noteGenerator(), false);

const stikyNote = (element) => {

  const input = element.querySelector('.input');
  const display = element.querySelector('.display');

  const typeHandler = (event) => {
    display.innerHTML = event.target.value
  }

  const mouseCoordTracker = (event) => {
      let coords = {
        x: event.clientX,
        y: event.clientY,
      }

      noteMovehandler(coords)
  }

  const noteMovehandler = (coords) => {
     element.style.top = `${coords.y - (element.offsetWidth / 3)}px`
     element.style.left = `${coords.x - (element.offsetHeight / 2)}px`
  }
  
  const pickHandler = (event) => {
    element.classList.toggle('picked');
  }

  element.addEventListener('mousedown', (event) => {
    document.addEventListener('mousemove', mouseCoordTracker);
    input.addEventListener('input', (event) => typeHandler(event));
    pickHandler();
  });

  element.addEventListener('mouseup', (event) => {
    document.removeEventListener('mousemove', mouseCoordTracker);
    input.removeEventListener('input', (event) => typeHandler(event));
    pickHandler();
  });
}


noteListRefiiller()
</script>
  
</body>
</html>